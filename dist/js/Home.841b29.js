(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{711:function(e,t,n){"use strict";(function(e){var r=n(0),a=n.n(r),o=n(631),i=n(918),l=n(928),u=n(907),c=n(908),s=n(909),f=(n(606),n(685)),p=n(712),d=n(713),h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},y=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var b=d.a.gender,m=d.a.role,g=function(t){function n(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments));return t.state={tableData:[],tableLoading:!1,total:0,selectedRows:[],editVisible:!1,editKey:"",detail:{}},t.queryCondition={name:"",pageNum:1,pageSize:10},t.columns=[{title:"姓名",dataIndex:"name",key:"name"},{title:"年龄",dataIndex:"age",key:"age",sorter:function(e,t){return e.age-t.age}},{title:"性别",dataIndex:"gender",key:"gender",filters:[{text:b[1],value:b[1]},{text:b[2],value:b[2]}],filterMultiple:!1,onFilter:function(e,t){return 0===t.gender.indexOf(e)}},{title:"角色",dataIndex:"role",key:"role"},{title:"操作",key:"action",width:200,render:function(e,n){return a.a.createElement(o.a.Group,null,a.a.createElement(o.a,{type:"primary",onClick:function(){return t.handleEdit(n.key)}},"修改"),a.a.createElement(i.a,{title:"确认删除用户"+n.name+"?",onConfirm:function(){return t.handleDelete([n])},okText:"确认",cancelText:"取消"},a.a.createElement(o.a,{type:"danger"},"删除")))}}],t.getList=function(){t.setState({tableLoading:!0}),Object(p.b)(t.queryCondition).then(function(e){var n=e.data.list.map(function(e){return h({},e,{key:e.id,gender:b[e.gender],role:e.role.map(function(e){return m[e]}).join(",")})});t.setState({tableLoading:!1,tableData:n,total:e.data.total})})},t.handleSearch=function(e){t.queryCondition.name=e,t.getList()},t.handleEdit=function(e){t.setState({editVisible:!0,editKey:e||""})},t.handleDelete=function(n){if(n){n.map(function(e){return e.key});var r=n.map(function(e){return e.name}).join("，");e.success("成功删除用户“"+r+"”！")}else{var a=t.state.selectedRows;if(0===a.length)return void e.warning("请选择要删除的用户");a.map(function(e){return e.key});var o=a.map(function(e){return e.name}).join("，");l.a.confirm({title:"确认删除以下用户吗?",content:o,onOk:function(){e.success("成功删除用户“"+o+"”！")}})}},t.handleSelectedRows=function(e){t.setState({selectedRows:e})},t.handlePaginationChange=function(e){Object.assign(t.queryCondition,{pageNum:e.current,pageSize:e.pageSize}),t.getList(),Object(f.b)(document.querySelector(".page"),0,15)},t.handleClose=function(){t.setState({editVisible:!1})},t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,a.a.Component),y(n,[{key:"componentDidMount",value:function(){this.getList()}},{key:"render",value:function(){return a.a.createElement("div",{className:"curd-table"},a.a.createElement(s.a,{onAdd:this.handleEdit,onDelete:this.handleDelete,onSearch:this.handleSearch}),a.a.createElement(u.a,{columns:this.columns,dataSource:this.state.tableData,total:this.state.total,tableLoading:this.state.tableLoading,onSelectedRows:this.handleSelectedRows,onPaginationChange:this.handlePaginationChange}),a.a.createElement(c.a,{title:"用户信息",editVisible:this.state.editVisible,editKey:this.state.editKey,onClose:this.handleClose}))}}]),n}();t.a=g}).call(this,n(666).default)},712:function(e,t,n){"use strict";(function(e){n.d(t,"b",function(){return r}),n.d(t,"a",function(){return a});var r=function(t){return e({url:"/user/userList",method:"post",data:t})},a=function(t){return e({url:"/user/userDetail",method:"post",data:t})}}).call(this,n(684).default)},713:function(e,t,n){"use strict";n.d(t,"b",function(){return a}),n.d(t,"a",function(){return o});var r=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(r=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{!r&&l.return&&l.return()}finally{if(a)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(e){var t=[],n=!0,a=!1,o=void 0;try{for(var i,l=Object.entries(e)[Symbol.iterator]();!(n=(i=l.next()).done);n=!0){var u=i.value,c=r(u,2),s=c[0],f=c[1];t.push({label:f,value:s})}}catch(e){a=!0,o=e}finally{try{!n&&l.return&&l.return()}finally{if(a)throw o}}return t},o={gender:{1:"男",2:"女"},role:{1:"管理员",2:"运营",3:"高级会员",4:"普通会员",5:"普通用户"}}},907:function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(920),i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var l=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.rowSelection={onChange:function(t,n){e.props.onSelectedRows(n)}},e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.a.Component),i(t,[{key:"render",value:function(){var e=this.props,t=e.tableLoading,n=e.columns,r=e.dataSource,i=e.total,l=e.onPaginationChange;return a.a.createElement(o.a,{bordered:!0,size:"small",columns:n,dataSource:r,loading:t,rowSelection:this.rowSelection,onChange:l,pagination:{total:i,defaultCurrent:1,defaultPageSize:10,pageSizeOptions:["10","20","30","50","100"],showQuickJumper:!0,showSizeChanger:!0,showTotal:function(e){return"共"+e+"条数据"}}})}}]),t}();t.a=l},908:function(e,t,n){"use strict";(function(e){var r=n(0),a=n.n(r),o=n(928),i=n(921),l=n(927),u=n(930),c=n(716),s=n(667),f=n(631),p=n(712),d=n(713),h=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var y={labelCol:{span:4},wrapperCol:{span:20}},b=function(t){function n(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments));return t.state={detail:{name:"",age:"",gender:"",role:[]}},t.componentWillReceiveProps=function(e){t.props.editKey!==e.editKey&&t.getDetail(e.editKey)},t.handleCancel=function(e){t.props.onClose()},t.handleSubmit=function(n){n.preventDefault(),t.props.form.validateFields(function(n,r){n?e.warning("请按照正确格式填写信息！"):(t.props.editKey?e.success("修改成功"):e.success("新增成功"),t.props.onClose())})},t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,a.a.Component),h(n,[{key:"getDetail",value:function(e){var t=this;e&&Object(p.a)({id:e}).then(function(e){t.setState({detail:e.data.detail})})}},{key:"render",value:function(){var e=this.props.form.getFieldDecorator,t=this.state.detail;return a.a.createElement(o.a,{title:(this.props.editKey?"修改":"新增")+this.props.title,width:600,visible:this.props.editVisible,onCancel:this.handleCancel,footer:null,destroyOnClose:!0},a.a.createElement(i.a,Object.assign({layout:"horizontal",colon:!0,labelAlign:"left"},y,{onSubmit:this.handleSubmit}),a.a.createElement(i.a.Item,{label:"姓名"},e("name",{initialValue:t.name,rules:[{required:!0,message:"请输入用户姓名!"}]})(a.a.createElement(l.a,{placeholder:"请输入姓名"}))),a.a.createElement(i.a.Item,{label:"年龄"},e("age",{initialValue:t.age,rules:[{required:!0,message:"请输入用户年龄!"}]})(a.a.createElement(u.a,{placeholder:"请输入年龄",min:1,max:150}))),a.a.createElement(i.a.Item,{label:"性别"},e("gender",{initialValue:t.gender,rules:[{required:!0,message:"请选择用户性别!"}]})(a.a.createElement(c.a.Group,null,Object(d.b)(d.a.gender).map(function(e){return a.a.createElement(c.a,{key:e.value,value:e.value},e.label)})))),a.a.createElement(i.a.Item,{label:"角色"},e("role",{initialValue:t.role,rules:[{required:!0,message:"请至少选择一个用户角色!"}]})(a.a.createElement(s.a.Group,{options:Object(d.b)(d.a.role)}))),a.a.createElement(i.a.Item,{wrapperCol:{offset:8}},a.a.createElement(f.a,{type:"primary",onClick:this.handleCancel},"取消"),a.a.createElement(f.a,{type:"primary",htmlType:"submit",style:{marginLeft:"20px"}},"保存"))))}}]),n}();t.a=i.a.create()(b)}).call(this,n(666).default)},909:function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(916),i=n(917),l=n(631),u=n(927),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.a.Component),c(t,[{key:"render",value:function(){var e=this.props,t=e.onAdd,n=e.onDelete,r=e.onSearch;return a.a.createElement(o.a,{type:"flex",justify:"space-between"},a.a.createElement(i.a,null,a.a.createElement(l.a.Group,null,a.a.createElement(l.a,{type:"primary",icon:"plus",onClick:function(){return t()}},"新增"),a.a.createElement(l.a,{type:"danger",icon:"minus",onClick:function(){return n()}},"删除"))),a.a.createElement(i.a,null,a.a.createElement(u.a.Search,{placeholder:"请输入查询关键字",onSearch:function(e){return r(e)},enterButton:!0})))}}]),t}();t.a=s},919:function(e,t,n){"use strict";n.r(t);var r=n(711);n.d(t,"default",function(){return r.a})},934:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=(n(603),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}());var i=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.handleClick=function(){console.log(e.props.history)},e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.a.Component),o(t,[{key:"render",value:function(){return a.a.createElement("div",null,a.a.createElement("p",{className:"c"},"dddd"),a.a.createElement("button",{onClick:this.handleClick},"kkkk"))}}]),t}();n.d(t,"default",function(){return i})}}]);